<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magento.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magento.com for more information.
 *
 *
 * Copyright Â© 2016 Wyomind. All rights reserved.
 * See LICENSE.txt for license details.
 *
 * Product additional attributes template
 *
 * @see Mage_Catalog_Block_Product_View_Attributes
 */
$_helper = $this->helper('catalog/output');
$_product = $this->getProduct();
$setId = $_product->getAttributeSetId(); // Attribute set Id
$groups = Mage::getModel('eav/entity_attribute_group')
    ->getResourceCollection()
    ->setAttributeSetFilter($setId)
    ->setSortOrder()
    ->load();

$attributeInfo = array();
foreach ($groups as $group) {
    if($group->getAttributeGroupName() == 'Attributes_Additional'){ // set name

        $attributes = Mage::getResourceModel('catalog/product_attribute_collection')
            ->setAttributeGroupFilter($group->getId())
            ->addVisibleFilter()
            ->checkConfigurableProducts()
            ->load();
        if ($attributes->getSize() > 0) {
            foreach ($attributes->getItems() as $attribute) {

                $attributeInfo[] = [
                    'code' => $attribute->getAttributeCode(),
                    'label' => $attribute->getFrontendLabel()
                ];

            }
        }
    }
}
?>
<?php if(count($attributeInfo) > 0): ?>
    <ul class="check-list attribute-list">
        <?php foreach ($attributeInfo as $attribute): ?>
            <?php
            $attrValue = $_product->getResource($_product)
                ->getAttribute($attribute['code'])
                ->getFrontend()
                ->getValue($_product);
            $valueImages = array();
            $optionValues = (!empty($_product->getData($attribute['code']))) ? explode(',', $_product->getData($attribute['code'])): '';
            if (!empty($optionValues)) {
                foreach ($optionValues as $val) {
                    $img = $this->helper('attributeoptionpro')->getAttributeOptionImage($val);
                    if ($img) {
                        $valueImages[] = sprintf(
                            '<img src="%s" alt="%s" title="%s" style="display:inline-block;vertical-align:middle;">',
                            $img,
                            $this->escapeHtml($attribute['label']),
                            $this->escapeHtml($attribute['label'])
                        );
                    }
                }
            }
            ?>
            <?php if(!empty($attrValue)): ?>
                <li>
                    <strong><?php echo $attribute['label'] . ': ' ?></strong><?php echo (empty($valueImages)) ? $attrValue: ''; ?>
                    <?php echo (is_array($valueImages) && !empty($valueImages)) ? implode(' ', $valueImages): ''; ?>
                </li>
            <?php endif; ?>
        <?php endforeach; ?>
    </ul>
<?php endif; ?>

